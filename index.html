<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Mobile Desktop Runner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="color-scheme" content="light">
  <style>
    :root { --desk-w: 1024px; --desk-h: 768px; --topbar-h: 56px; }
    html, body { height: 100%; margin: 0; }
    body { font: 14px/1.4 system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans"; background: #f6f7f9; color: #111; overflow: hidden; }
    .topbar {
      position: fixed; top: 0; left: 0; right: 0; height: var(--topbar-h);
      display: grid; grid-auto-flow: column; align-items: center; gap: 8px;
      padding: 8px 10px; box-sizing: border-box;
      background: #fff; border-bottom: 1px solid #d6d9de; z-index: 9999;
    }
    .spacer { height: var(--topbar-h); }
    button, label { font: inherit; }
    button {
      height: 36px; padding: 0 12px;
      border: 1px solid #c9ced6; background: #fff; border-radius: 8px; cursor: pointer;
    }
    .chk { display: grid; grid-auto-flow: column; align-items: center; gap: 6px; white-space: nowrap; }
    .wrap { display: grid; grid-template-rows: auto 1fr; height: calc(100% - var(--topbar-h)); }
    textarea {
      width: 100%; height: 28vh; resize: vertical; box-sizing: border-box; padding: 10px; margin: 10px;
      border: 1px solid #d6d9de; border-radius: 8px; background: #fff;
      font: 12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; tab-size: 2; white-space: pre;
    }
    .stage-outer {
      margin: 0 10px 10px; display: grid; place-items: start center; overflow: hidden;
      background: #e9ecf1; border: 1px solid #d6d9de; border-radius: 10px; padding: 10px;
    }
    .stage-scale { transform-origin: top left; will-change: transform; }
    .desk {
      width: var(--desk-w); height: var(--desk-h); background: #fff;
      border: 1px solid #ccd2da; border-radius: 8px; overflow: hidden; position: relative;
      box-shadow: 0 1px 3px rgba(0,0,0,.08), 0 8px 30px rgba(0,0,0,.06);
    }
    .desk > iframe { width: 100%; height: 100%; border: 0; display: block; background: #fff; }
    .zoom { display: grid; grid-auto-flow: column; gap: 6px; align-items: center; margin-left: 8px; white-space: nowrap; }
    .zoom .val { min-width: 54px; text-align: center; }
  </style>
</head>
<body>
  <div class="topbar">
    <button id="paste">Вставить</button>
    <button id="run">Запустить</button>
    <button id="clear">Очистить</button>
    <label class="chk"><input type="checkbox" id="sanitize" checked> очистить лишний текст</label>
    <label class="chk"><input type="checkbox" id="lockScroll"> блокировать прокрутку внутри окна</label>
    <div class="zoom">
      <button id="zMinus">–</button><div class="val" id="zVal">auto</div><button id="zPlus">+</button><button id="zReset">100%</button>
    </div>
  </div>
  <div class="spacer"></div>

  <div class="wrap">
    <textarea id="code" placeholder="Вставьте HTML/JS/CSS. Можно вставлять сообщение целиком — включена очистка до/после HTML."></textarea>
    <div class="stage-outer">
      <div class="stage-scale" id="stageScale">
        <div class="desk">
          <iframe id="view" sandbox="allow-scripts allow-forms allow-modals allow-pointer-lock"></iframe>
        </div>
      </div>
    </div>
  </div>

  <script src="runner.js"></script>
</body>
</html>
